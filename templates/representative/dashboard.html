{% extends "base.html" %}
{% set title = "Representative Dashboard" %}

{% block content %}
<div class="rep-dashboard">

    <!-- =========================
         Page Header
    ========================== -->
    <div class="page-header">
        <h2>ğŸ›ï¸ Representative Dashboard</h2>
        <p class="page-subtext">
            Govern, respond to issues, and participate in public policy discussions.
        </p>
    </div>

    <!-- =========================
         Quick Actions (UPDATED)
    ========================== -->
    <div class="dashboard-actions">

        <a href="{{ url_for('rep_policy.create_policy') }}" class="btn-primary">
            â• Create Policy Post
        </a>

        <a href="{{ url_for('rep_policy.policy_feed') }}" class="btn-secondary">
            ğŸ›ï¸ Policy Discussions
        </a>

        <a href="{{ url_for('representative.issue_management') }}" class="btn-secondary">
            ğŸ§‘â€âš–ï¸ Manage Issues
        </a>

        <a href="{{ url_for('representative.performance_score') }}" class="btn-secondary">
            ğŸ“Š My Score
        </a>

        <a href="{{ url_for('accountability.view_rep_accountability',
                    rep_user_id=session.get('user_id')) }}"
   class="btn-secondary">
    ğŸ“ˆ Public Accountability
</a>

    </div>

    <!-- =========================
         Open Issues Summary
    ========================== -->
    <section class="dashboard-section">
        <h3>ğŸ“Œ Issues Requiring Attention</h3>

        {% if issues %}
            {% for issue in issues[:5] %}
                {% if issue.status != "Resolved" %}
                    <div class="issue-row">
                        <a href="{{ url_for('citizen.issue_detail', issue_id=issue.id) }}">
                            {{ issue.title }}
                        </a>
                        <span class="status status-{{ issue.status|lower }}">
                            {{ issue.status }}
                        </span>
                    </div>
                {% endif %}
            {% endfor %}
        {% else %}
            <p>No active issues at the moment.</p>
        {% endif %}
    </section>

    <!-- =========================
         Info Box
    ========================== -->
    <div class="info-box">
        â„¹ï¸ Official statements and debates now happen through
        <strong>Policy Discussions</strong> to ensure transparency and AI-assisted analysis.
    </div>

</div>
{% endblock %}
