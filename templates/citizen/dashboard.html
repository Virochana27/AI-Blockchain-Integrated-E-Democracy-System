{% extends "base.html" %}
{% set title = "Citizen Dashboard" %}

{% block content %}
<div class="dashboard">
    <h2>Citizen Dashboard</h2>

    <!-- =========================
         Actions
    ========================== -->
    <div class="action-bar">
        <a href="{{ url_for('citizen.vote') }}" class="btn-primary">
            Cast Vote
        </a>
        <a href="{{ url_for('citizen.new_issue') }}" class="btn-secondary">
            Raise Issue
        </a>
    </div>

    <!-- =========================
         Issues Feed
    ========================== -->
    <section class="issues-section">
        <h3>Issues in Your Constituency</h3>

        {% if issues and issues|length > 0 %}
            <div class="issues-list">
                {% for issue in issues %}
                    <div class="issue-card">
                        <h4>{{ issue.title }}</h4>
                        <p class="issue-category">
                            Category: {{ issue.category }}
                        </p>
                        <p class="issue-description">
                            {{ issue.description }}
                        </p>

                        <p class="issue-status status-{{ issue.status|lower }}">
                            Status: {{ issue.status }}
                        </p>

                        <div class="issue-meta">
                            <span>Raised on: {{ issue.created_at }}</span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No issues have been raised in your constituency yet.</p>
        {% endif %}
    </section>
</div>
{% endblock %}
